<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
      
   <title>21.4.&#160;SMS Command</title><link rel="stylesheet" type="text/css" href="../Resources/docbook_bsd.css" /><link rel="home" href="../Resources/dhis2_user_manual_en.html" title="DHIS2 User guide" /><link rel="up" href="../Resources/ch21.html" title="Chapter&#160;21.&#160;Mobile" /><link rel="prev" href="../Resources/mobile_j2me_gprs_3g.html" title="21.3.&#160;J2ME GPRS/3G Client" /><link rel="next" href="../Resources/mobile_sms_service.html" title="21.5.&#160;SMS Service" /></head>
    <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
        <div class="navheader">
            <table width="100%" summary="Navigation header">
                <tr>
                    <th colspan="3" align="center">21.4.&#160;SMS Command</th>
                </tr>
                <tr>
                    <td width="20%" align="left">
                        <a accesskey="p" href="mobile_j2me_gprs_3g.html">Prev</a>&#160;</td>
                    <th width="60%" align="center">Chapter&#160;21.&#160;Mobile</th>
                    <td width="20%" align="right">&#160;<a accesskey="n" href="mobile_sms_service.html">Next</a></td>
                </tr>
            </table>
            <hr />
        </div>
        <div class="section">
            <div class="titlepage">
                <div>
                    <div>
                        <h2 class="title" style="clear: both;">
                            <a name="mobile_sms_command">
                            </a>21.4.&#160;SMS Command</h2>
                    </div>
                </div>
            </div>
            <div class="toc">
                <dl class="toc">
                    <dt>
                        <span class="section">
                            <a href="mobile_sms_command.html#d0e22714">21.4.1. Set up SMS command</a>
                        </span>
                    </dt>
                    <dt>
                        <span class="section">
                            <a href="mobile_sms_command.html#d0e22820">21.4.2. SMS Command Type</a>
                        </span>
                    </dt>
                    <dd>
                        <dl>
                            <dt>
                                <span class="section">
                                    <a href="mobile_sms_command.html#d0e22825">21.4.2.1. SMS Command for Reporting Data</a>
                                </span>
                            </dt>
                            <dt>
                                <span class="section">
                                    <a href="mobile_sms_command.html#d0e22868">21.4.2.2. SMS Command for Alerting, Registering</a>
                                </span>
                            </dt>
                            <dt>
                                <span class="section">
                                    <a href="mobile_sms_command.html#d0e22887">21.4.2.3. SMS Command for Event Registration</a>
                                </span>
                            </dt>
                        </dl>
                    </dd>
                </dl>
            </div>
            <p>SMS command feature helps DHIS2 system receiving SMS from users, patients, or even anonymous. A SMS command is an object containing the configurations for each SMS
form: reporting data from phones or j2me apps, alerting users, registering patient or user, etc. </p>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h3 class="title">
                                <a name="d0e22714">
                                </a>21.4.1.&#160;Set up SMS command</h3>
                        </div>
                    </div>
                </div>
                <p>This is where you can create a new SMS command</p>
                <p />
                <div class="screenshot">
                    <div class="mediaobject" align="center">
                        <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0;cellspacing: 0;" width="40%">
                            <tr>
                                <td align="center">
                                    <img src="../Resources/mobile-sms-startup-link.png" align="middle" width="100%" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <p />
                <p />
                <div class="screenshot">
                    <div class="mediaobject" align="center">
                        <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0;cellspacing: 0;" width="40%">
                            <tr>
                                <td align="center">
                                    <img src="../Resources/mobile-sms-startup-link-sms-command.png" align="middle" width="100%" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <p />
                <p>Usually each SMS command has it own property, then the setting up process may be different from each other. Currently, we have 4 types of SMS command:</p>
                <p />
                <div class="screenshot">
                    <div class="mediaobject" align="center">
                        <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0;cellspacing: 0;" width="40%">
                            <tr>
                                <td align="center">
                                    <img src="../Resources/mobile-sms-conf-sms-command-types.png" align="middle" width="100%" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <p />
                <p>With KEY_VALUE_PARSER and J2ME_PARSER, the SMS command will have dataset because those are used for reporting data</p>
                <p />
                <div class="screenshot">
                    <div class="mediaobject" align="center">
                        <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0;cellspacing: 0;" width="40%">
                            <tr>
                                <td align="center">
                                    <img src="../Resources/mobile-sms-conf-sms-command-dataset.png" align="middle" width="100%" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <p />
                <p>With ALERT_PARSER and UNREGISTERED_PARSER, the SMS command will have user group because those are used for sending message such as SMS, DHIS2 conversation, email.</p>
                <p />
                <div class="screenshot">
                    <div class="mediaobject" align="center">
                        <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0;cellspacing: 0;" width="40%">
                            <tr>
                                <td align="center">
                                    <img src="../Resources/mobile-sms-conf-sms-command-user-group.png" align="middle" width="100%" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <p />
                <p>There are certain parameters which are common to all SMS Command types. These parameters have default values configured in the system, if user does provide any value to these
 parameters then those default ones will be used. Here is the list of those parameters</p>
                <div class="table">
                    <a name="d0e22762">
                    </a>
                    <p class="title">
                        <b>Table&#160;21.2.&#160;Common Parameters</b>
                    </p>
                    <div class="table-contents">
                        <table class="table" summary="Common Parameters" border="1">
                            <colgroup>
                                <col class="c1" />
                                <col class="newCol2" />
                                <col class="c2" />
                            </colgroup>
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Code and value Separator</td>
                                    <td>String</td>
                                    <td>To provide custom code value separator. Default is "="</td>
                                </tr>
                                <tr>
                                    <td>Reply message if no codes are sent (only the command)</td>
                                    <td>String</td>
                                    <td>To provide message if no code is found in SMS text input. Default is "Parameter missing"</td>
                                </tr>
                                <tr>
                                    <td>Wrong format message</td>
                                    <td>String</td>
                                    <td>To provide message if command is not formatted correctly. Command should be fomatted as per code value separator. This message will also be sent back if any mandatory parameter is missing.</td>
                                </tr>
                                <tr>
                                    <td>No user message</td>
                                    <td>String</td>
                                    <td>To provide message if sending phone number is not registered in DHIS 2.</td>
                                </tr>
                                <tr>
                                    <td>User belong to more than one OrgUnit message</td>
                                    <td>String</td>
                                    <td>Certain SMS command types require user ( retrived from sending phone number ) to be associated with only one organization unit. This message can be configured to be sent back in case that requirement is not fullfilled.</td>
                                </tr>
                                <tr>
                                    <td>Success Message</td>
                                    <td>String</td>
                                    <td>To provide message that will be sent upon successful completion of the process.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <br class="table-break" />
            </div>
            <div class="section">
                <div class="titlepage">
                    <div>
                        <div>
                            <h3 class="title">
                                <a name="d0e22820">
                                </a>21.4.2.&#160;SMS Command Type</h3>
                        </div>
                    </div>
                </div>
                <p>The SMS command is basically defined by its parser type. In other word, each SMS command has one unique parser to parse the plain text SMS, then the result will be used for the purpose of that SMS command.</p>
                <div class="section">
                    <div class="titlepage">
                        <div>
                            <div>
                                <h4 class="title">
                                    <a name="d0e22825">
                                    </a>21.4.2.1.&#160;SMS Command for Reporting Data</h4>
                            </div>
                        </div>
                    </div>
                    <p>In order to report data for example data set (aggregation), we use SMS commands which have KEY_VALUE_PARSER (for phone's plain text), or J2ME_PARSER (for j2me apps)</p>
                    <p />
                    <div class="screenshot">
                        <div class="mediaobject" align="center">
                            <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0;cellspacing: 0;" width="40%">
                                <tr>
                                    <td align="center">
                                        <img src="../Resources/mobile-sms-cofig-sms-command-format-reportingdata.png" align="middle" width="100%" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <p />
                    <p>If the command has name "report", and a list of data element with code like above. The format should be: [command's name] [code][value] [code][value] [code][value]....,the [value] of course might be changed depends on real data, so you have to preapre a SMS text like this example: <span class="bold"><strong>report vo2 vn5 a2 b6 z3 x1</strong></span></p>
                    <p>In case the command has a separator for instance ".", the SMS text should be:</p>
                    <p>                <span class="bold"><strong>report vo.2.vn.5.a.2.b.6.z.3.x.1</strong></span></p>
                    <p>or <span class="bold"><strong>
          <span class="bold"><strong>report vo.2|vn.5|a.2|b.6|z.3|x.1</strong></span>
        </strong></span></p>
                    <p>Moreover in SMS text input, orgUnit can be specified like this  <span class="bold"><strong>org orgUnitCode</strong></span> If no orgUnit is specified in SMS
 then user is retrieved first from the sending phoneNumber and then orgUnit from that user. As far as PeriodType is concerned it should be specified in this format "ddMM" for example 3108,
 but in case its not specified then PeriodType will be retrieved from DataSet attached to SMSCommand</p>
                    <p>With the J2ME_PARSER, you don't need to prepare those SMS text, because the J2ME will do this job</p>
                    <div class="screenshot">
                        <div class="mediaobject" align="center">
                            <img src="../Resources/mobile_sms_custom_message.PNG" align="middle" width="243" />
                        </div>
                    </div>
                    <p>User can set the custom response message for "Wrong format message", "No User Message", "User belong to more than one OrgUnit message" and "Success message". If no custom message is being set, system will use the default message.</p>
                </div>
                <div class="section">
                    <div class="titlepage">
                        <div>
                            <div>
                                <h4 class="title">
                                    <a name="d0e22868">
                                    </a>21.4.2.2.&#160;SMS Command for Alerting, Registering</h4>
                            </div>
                        </div>
                    </div>
                    <p>In order to alert users or register patients, users, we use SMS commands which have ALERT_PARSER (for phone's plain text), or UNREGISTERED_PARSER (for j2me apps)</p>
                    <p />
                    <div class="screenshot">
                        <div class="mediaobject" align="center">
                            <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0;cellspacing: 0;" width="40%">
                                <tr>
                                    <td align="center">
                                        <img src="../Resources/mobile-sms-cofig-sms-command-format-alert.png" align="middle" width="100%" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <p />
                    <p>The format of those command will be: [command's name] [text], for example: </p>
                    <p>
                        <span class="bold">
                            <strong>alert one emergency case in A town</strong>
                        </span>
                    </p>
                    <p>Commands which has ALERT_PARSER will be received from users only</p>
                </div>
                <div class="section">
                    <div class="titlepage">
                        <div>
                            <div>
                                <h4 class="title">
                                    <a name="d0e22887">
                                    </a>21.4.2.3.&#160;SMS Command for Event Registration</h4>
                            </div>
                        </div>
                    </div>
                    <p>Event Registration can be used to register anonymous event into the system based on the data collected through SMS. This command type is associated with Programs of type WITHOUT_REGISTRATION. For example Birth events can be tracked using this parser.</p>
                    <p />
                    <div class="screenshot">
                        <div class="mediaobject" align="center">
                            <table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0;cellspacing: 0;" width="40%">
                                <tr>
                                    <td align="center">
                                        <img src="../Resources/event-registration-parser.png" align="middle" width="100%" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <p />
                    <p>The format of those command will be: [command's name] [code][separator][value], for example: </p>
                    <p>
                        <span class="bold">
                            <strong>birth A=1,B=2,G=Male</strong>
                        </span>
                    </p>
                    <p>Code/Value separator is configurable. Comma "," is by default taken as field separator. Commands which has EVENT_REGISTRATION_PARSER will be received from DHIS2 users only. Once command is successfully received then data received in SMS will be parsed and event will be registered in DHIS2. </p>
                </div>
            </div>
        </div>
        <div class="navfooter">
            <hr />
            <table width="100%" summary="Navigation footer">
                <tr>
                    <td width="40%" align="left">
                        <a accesskey="p" href="mobile_j2me_gprs_3g.html">Prev</a>&#160;</td>
                    <td width="20%" align="center">
                        <a accesskey="u" href="ch21.html">Up</a>
                    </td>
                    <td width="40%" align="right">&#160;<a accesskey="n" href="mobile_sms_service.html">Next</a></td>
                </tr>
                <tr>
                    <td width="40%" align="left" valign="top">21.3.&#160;J2ME GPRS/3G Client&#160;</td>
                    <td width="20%" align="center">
                        <a accesskey="h" href="dhis2_user_manual_en.html">Home</a>
                    </td>
                    <td width="40%" align="right" valign="top">&#160;21.5.&#160;SMS Service</td>
                </tr>
            </table>
        </div>
    </body>
</html>